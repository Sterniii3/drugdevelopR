<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="drugdevelopR">
<title>More Parameters to Adapt to Specific Settings and Individual Needs • drugdevelopR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="More Parameters to Adapt to Specific Settings and Individual Needs">
<meta property="og:description" content="drugdevelopR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">drugdevelopR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Bias_adjustment.html">Methods for Discounting of Phase II Results - Bias Adjustment</a>
    <a class="dropdown-item" href="../articles/Binary_distributed_outcomes.html">Binary Distributed Outcome Variables</a>
    <a class="dropdown-item" href="../articles/Fixed_and_prior_distributions.html">Fixed effects and prior distributions</a>
    <a class="dropdown-item" href="../articles/Interpreting_Output.html">Interpreting the Rest of the Output</a>
    <a class="dropdown-item" href="../articles/More_Parameters.html">More Parameters to Adapt to Specific Settings and Individual Needs</a>
    <a class="dropdown-item" href="../articles/Multiarm_Trials.html">Multiarm - Methods for Multi-Arm Programs</a>
    <a class="dropdown-item" href="../articles/Multiple_Endpoints.html">Multiple_Endpoints</a>
    <a class="dropdown-item" href="../articles/Multitrial.html">Multitrial Programs - Methods for Programs with Several Phase III Trials</a>
    <a class="dropdown-item" href="../articles/Time-to-event_outcomes.html">Time-to-event Outcome Variables</a>
    <a class="dropdown-item" href="../articles/introduction-to-drugdevelopR.html">Introduction to planning phase II and phase III trials with drugdevelopR</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Sterniii3/drugdevelopR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>More Parameters to Adapt to Specific Settings and Individual Needs</h1>
                        <h4 data-toc-skip class="author">Johannes
Cepicka</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Sterniii3/drugdevelopR/blob/HEAD/vignettes/More_Parameters.Rmd" class="external-link"><code>vignettes/More_Parameters.Rmd</code></a></small>
      <div class="d-none name"><code>More_Parameters.Rmd</code></div>
    </div>

    
    
<p>Suppose we are planning a drug development program testing the
superiority of an experimental treatment over a control treatment. Our
drug development program consists of an exploratory phase II trial which
is, in case of promising results, followed by a confirmatory phase III
trial.</p>
<p>The drugdevelopR package enables us to optimally plan such programs
using a utility-maximizing approach. To get a brief introduction, we
presented a very basic example on how the package works in <a href="https://sterniii3.github.io/drugdevelopR/articles/introduction-to-drugdevelopR.html">Introduction
to planning phase II and phase III trials with drugdevelopR</a>.
However, there are many more parameters, which the user can provide, to
adapt the program to your specific needs. In this article, we therefore
want to present the options you have.</p>
<div class="section level2">
<h2 id="the-example-setting-and-the-input-parameters">The example setting and the input parameters<a class="anchor" aria-label="anchor" href="#the-example-setting-and-the-input-parameters"></a>
</h2>
<p>We are in the same setting as in the introduction, i.e. we suppose we
are developing a new tumor treatment, <em>exper</em>. The patient
variable that we want to investigate is the difference in tumor width
between the one-year visit and baseline. This is a normally distributed
outcome variable.</p>
<p>The parameters we insert into the function
<code>optimum_normal</code> are the same parameters we also inserted in
the basic setting. Thus, for more information on the input values we
refer to the <a href="https://sterniii3.github.io/drugdevelopR/articles/introduction-to-drugdevelopR.html">Introduction</a>.
We start by loading the drugdevelopR package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Sterniii3/drugdevelopR" class="external-link">drugdevelopR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: mvtnorm</span></span>
<span><span class="co">#&gt; Loading required package: doParallel</span></span>
<span><span class="co">#&gt; Loading required package: foreach</span></span>
<span><span class="co">#&gt; Loading required package: iterators</span></span>
<span><span class="co">#&gt; Loading required package: parallel</span></span>
<span><span class="co">#&gt; Loading required package: msm</span></span>
<span><span class="co">#&gt; Loading required package: cubature</span></span></code></pre></div>
<p>Back then, we got the following output:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span></span>
<span><span class="co">#&gt;         u Kappa n2  n3   n pgo sProg Delta   K K2  K3 sProg1 sProg2 sProg3</span></span>
<span><span class="co">#&gt; 1 3259.83  0.06 84 166 250   1  0.85 0.625 Inf 72 139   0.68   0.17   0.01</span></span>
<span><span class="co">#&gt;   steps1 stepm1 stepl1 alpha beta c02 c03    c2   c3   b1   b2    b3 gamma</span></span>
<span><span class="co">#&gt; 1      0    0.5    0.8  0.05  0.1  15  20 0.675 0.72 3000 8000 10000     0</span></span></code></pre></div>
<p>We now want to see, how different modifications, i.e using more
paramters change the outcome of the program. Note, that setting the
parameter <code>fixed</code> to be <code>"False"</code>, and thus using
a prior distribution, was already explained in the article <a href="https://sterniii3.github.io/drugdevelopR/articles/Fixed_and_prior_distributions.html"><em>Fixed
or prior</em></a></p>
<div class="section level3">
<h3 id="constraint-optimization">Constraint Optimization<a class="anchor" aria-label="anchor" href="#constraint-optimization"></a>
</h3>
<p>The are three options how to include constraint optimization, by
setting maximum costs limits, a maximum number of participants or by
demanding a minimum probability of a successful program. These options
can be applied separately or combined, as it is best suited to your
specific needs.</p>
<div class="section level4">
<h4 id="cost-constraint---maximum-total-costs">Cost Constraint - Maximum Total Costs<a class="anchor" aria-label="anchor" href="#cost-constraint---maximum-total-costs"></a>
</h4>
<p>The total costs are given as sum of the cost ins phase II and phase
III, i.e. as <span class="math inline">\(K2\)</span> + <span class="math inline">\(K3\)</span>. In our example we get total costs of
<span class="math inline">\(72+139=211\)</span> (in 10^5 $). Let’s
assume an investor in your drug or a pharmaceutical company is only
willing to pay 20,000,000 $. You can now set a maximum cost constraint
by providing an parameter value of <code>K = 200</code> into the
<code>optimum_normal</code> function. The default value for
<code>K</code> is <code>Inf</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">resK</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_normal.html">optimal_normal</a></span><span class="op">(</span>Delta1 <span class="op">=</span> <span class="fl">0.625</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># treatment effect</span></span>
<span>                       n2min <span class="op">=</span> <span class="fl">20</span>, n2max <span class="op">=</span> <span class="fl">400</span>, <span class="co"># sample size region</span></span>
<span>                       stepn2 <span class="op">=</span> <span class="fl">4</span>, <span class="co"># sample size step size</span></span>
<span>                       kappamin <span class="op">=</span> <span class="fl">0.02</span>, kappamax <span class="op">=</span> <span class="fl">0.2</span>, <span class="co"># threshold region</span></span>
<span>                       stepkappa <span class="op">=</span> <span class="fl">0.02</span>, <span class="co"># threshold step size</span></span>
<span>                       c2 <span class="op">=</span> <span class="fl">0.675</span>, c3 <span class="op">=</span> <span class="fl">0.72</span>, <span class="co"># maximal total trial costs</span></span>
<span>                       c02 <span class="op">=</span> <span class="fl">15</span>, c03 <span class="op">=</span> <span class="fl">20</span>, <span class="co"># maximal per-patient costs</span></span>
<span>                       b1 <span class="op">=</span> <span class="fl">3000</span>, b2 <span class="op">=</span> <span class="fl">8000</span>, b3 <span class="op">=</span> <span class="fl">10000</span>, <span class="co"># gains for patients</span></span>
<span>                       alpha <span class="op">=</span> <span class="fl">0.05</span>, <span class="co"># significance level</span></span>
<span>                       beta <span class="op">=</span> <span class="fl">0.1</span>, <span class="co"># 1 - power</span></span>
<span>                       Delta2 <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, in1 <span class="op">=</span> <span class="cn">NULL</span>, in2 <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       a <span class="op">=</span> <span class="cn">NULL</span>,b <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># setting all unneeded parameters to NULL</span></span>
<span>                       K <span class="op">=</span> <span class="fl">200</span> <span class="co"># cost constraint</span></span>
<span>                       <span class="op">)</span> </span></code></pre></div>
<p>We get the following results:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resK</span></span>
<span><span class="co">#&gt;         u Kappa n2  n3   n  pgo sProg Delta   K K2  K3 sProg1 sProg2 sProg3</span></span>
<span><span class="co">#&gt; 1 3247.42   0.1 88 146 234 0.99  0.85 0.625 200 74 125   0.68   0.17   0.01</span></span>
<span><span class="co">#&gt;   steps1 stepm1 stepl1 alpha beta c02 c03    c2   c3   b1   b2    b3 gamma</span></span>
<span><span class="co">#&gt; 1      0    0.5    0.8  0.05  0.1  15  20 0.675 0.72 3000 8000 10000     0</span></span></code></pre></div>
<p>We see that due to the cost constraint the costs in phase II actually
increase from 72 to 74, however the costs in phase III decrease from 139
to 125, so overall the constraint is met. Moreover, the expected utility
at the optimum decreases from 325,983,000 to 324,742,000 dollars.</p>
</div>
<div class="section level4">
<h4 id="sample-size-constraint---maximum-number-of-participants">Sample Size Constraint - Maximum Number of Participants<a class="anchor" aria-label="anchor" href="#sample-size-constraint---maximum-number-of-participants"></a>
</h4>
<p>Very similarly to to the cost constraint, we can set a constraint on
the maximum number of participants in our trial. As we can see, without
constraints, in the optimum we need a total number of 250 participants.
However, one can certainly imagine a situation, where the only 200
persons willing to participate in a trial, for example because the
incidence of the illness is not very high within the target population.
To model this, we can easily set a sample size constraint, in this case
of <code>N = 200</code>. This allows for an optimal allocation of the
participants between phase II and III. The default value for
<code>N</code> is <code>Inf</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">resN</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_normal.html">optimal_normal</a></span><span class="op">(</span>Delta1 <span class="op">=</span> <span class="fl">0.625</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># treatment effect</span></span>
<span>                       n2min <span class="op">=</span> <span class="fl">20</span>, n2max <span class="op">=</span> <span class="fl">400</span>, <span class="co"># sample size region</span></span>
<span>                       stepn2 <span class="op">=</span> <span class="fl">4</span>, <span class="co"># sample size step size</span></span>
<span>                       kappamin <span class="op">=</span> <span class="fl">0.02</span>, kappamax <span class="op">=</span> <span class="fl">0.2</span>, <span class="co"># threshold region</span></span>
<span>                       stepkappa <span class="op">=</span> <span class="fl">0.02</span>, <span class="co"># threshold step size</span></span>
<span>                       c2 <span class="op">=</span> <span class="fl">0.675</span>, c3 <span class="op">=</span> <span class="fl">0.72</span>, <span class="co"># maximal total trial costs</span></span>
<span>                       c02 <span class="op">=</span> <span class="fl">15</span>, c03 <span class="op">=</span> <span class="fl">20</span>, <span class="co"># maximal per-patient costs</span></span>
<span>                       b1 <span class="op">=</span> <span class="fl">3000</span>, b2 <span class="op">=</span> <span class="fl">8000</span>, b3 <span class="op">=</span> <span class="fl">10000</span>, <span class="co"># gains for patients</span></span>
<span>                       alpha <span class="op">=</span> <span class="fl">0.05</span>, <span class="co"># significance level</span></span>
<span>                       beta <span class="op">=</span> <span class="fl">0.1</span>, <span class="co"># 1 - power</span></span>
<span>                       Delta2 <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, in1 <span class="op">=</span> <span class="cn">NULL</span>, in2 <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       a <span class="op">=</span> <span class="cn">NULL</span>,b <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># setting all unneeded parameters to NULL</span></span>
<span>                       N <span class="op">=</span> <span class="fl">200</span> <span class="co"># sample size constraint</span></span>
<span>                       <span class="op">)</span> </span></code></pre></div>
<p>We get the following results:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resN</span></span>
<span><span class="co">#&gt;         u Kappa n2  n3   n  pgo sProg Delta   K K2  K3 sProg1 sProg2 sProg3</span></span>
<span><span class="co">#&gt; 1 3142.41  0.18 72 128 200 0.97  0.82 0.625 Inf 64 112   0.66   0.16   0.01</span></span>
<span><span class="co">#&gt;   steps1 stepm1 stepl1 alpha beta c02 c03    c2   c3   b1   b2    b3 gamma</span></span>
<span><span class="co">#&gt; 1      0    0.5    0.8  0.05  0.1  15  20 0.675 0.72 3000 8000 10000     0</span></span></code></pre></div>
<p>Due to our sample size constraint to optimal number of participants
in phase II is 72 and 128 in phase III (down from 84 and 166
respectively) within this framework. The expected utility in the optimum
decreases to 314,241,000.</p>
</div>
<div class="section level4">
<h4 id="success-probability-constraint---minimum-probability-of-a-successful-program">Success Probability Constraint - Minimum Probability of a Successful
Program<a class="anchor" aria-label="anchor" href="#success-probability-constraint---minimum-probability-of-a-successful-program"></a>
</h4>
<p>The last option provided for constraint optimization is the minimum
probability of a successful program. In our basic setting, without
constraints, we hat a probability that the program was successful of
0.85, i.e. we had a probability of 0.85 that the program would proceed
from phase II to phase III and that a positive treatment effect could be
detected in phase III. Let’s say, you are willing to have higher costs
and in return want this probability to be 0.87. You can include this
within the framework, by including the parameter <code>S</code> and by
setting it to <code>S = 0.87</code>. The default value for
<code>S</code> is <code>-Inf</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">resS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_normal.html">optimal_normal</a></span><span class="op">(</span>Delta1 <span class="op">=</span> <span class="fl">0.625</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># treatment effect</span></span>
<span>                       n2min <span class="op">=</span> <span class="fl">20</span>, n2max <span class="op">=</span> <span class="fl">400</span>, <span class="co"># sample size region</span></span>
<span>                       stepn2 <span class="op">=</span> <span class="fl">4</span>, <span class="co"># sample size step size</span></span>
<span>                       kappamin <span class="op">=</span> <span class="fl">0.02</span>, kappamax <span class="op">=</span> <span class="fl">0.2</span>, <span class="co"># threshold region</span></span>
<span>                       stepkappa <span class="op">=</span> <span class="fl">0.02</span>, <span class="co"># threshold step size</span></span>
<span>                       c2 <span class="op">=</span> <span class="fl">0.675</span>, c3 <span class="op">=</span> <span class="fl">0.72</span>, <span class="co"># maximal total trial costs</span></span>
<span>                       c02 <span class="op">=</span> <span class="fl">15</span>, c03 <span class="op">=</span> <span class="fl">20</span>, <span class="co"># maximal per-patient costs</span></span>
<span>                       b1 <span class="op">=</span> <span class="fl">3000</span>, b2 <span class="op">=</span> <span class="fl">8000</span>, b3 <span class="op">=</span> <span class="fl">10000</span>, <span class="co"># gains for patients</span></span>
<span>                       alpha <span class="op">=</span> <span class="fl">0.05</span>, <span class="co"># significance level</span></span>
<span>                       beta <span class="op">=</span> <span class="fl">0.1</span>, <span class="co"># 1 - power</span></span>
<span>                       Delta2 <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, in1 <span class="op">=</span> <span class="cn">NULL</span>, in2 <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       a <span class="op">=</span> <span class="cn">NULL</span>,b <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># setting all unneeded parameters to NULL</span></span>
<span>                       S <span class="op">=</span> <span class="fl">0.87</span> <span class="co">#minimum success probability</span></span>
<span>                       <span class="op">)</span> </span></code></pre></div>
<p>We get the following results:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resS</span></span>
<span><span class="co">#&gt;         u Kappa  n2  n3   n pgo sProg Delta   K  K2  K3 sProg1 sProg2 sProg3</span></span>
<span><span class="co">#&gt; 1 3235.57  0.06 132 126 258   1  0.87 0.625 Inf 104 111   0.71   0.16   0.01</span></span>
<span><span class="co">#&gt;   steps1 stepm1 stepl1 alpha beta c02 c03    c2   c3   b1   b2    b3 gamma</span></span>
<span><span class="co">#&gt; 1      0    0.5    0.8  0.05  0.1  15  20 0.675 0.72 3000 8000 10000     0</span></span></code></pre></div>
<p>The probability of a successful program now increased from 0.85 to
0.87, mainly by increasing the number of participants in phase II. The
expected utility decreased to 323,557,000.</p>
</div>
</div>
<div class="section level3">
<h3 id="customized-effect-size-categories">Customized Effect Size Categories<a class="anchor" aria-label="anchor" href="#customized-effect-size-categories"></a>
</h3>
<p>Up until now, the effect size categories for a small, medium or large
treatment effect were predefined and set to <span class="math inline">\(0-0.5\)</span> for a small treatment effect, <span class="math inline">\(0.5-0.8\)</span> for a medium treatment effect and
<span class="math inline">\(\geq 0.8\)</span> for a large treatment
effect (each in standardized differences in mean). These parameter
values were taken from Cohen (1988). However, one can easily customize
the effect size categories by inserting threshold values for each effect
size. Let’s say you only consider a program successful if the treatment
effect is above 0.1. Furthermore, you want to assign a medium benefit if
the treatment effect is between 0.6 and 1 and a large benefit if the
treatment effect is above 1. Hereby, note that there is a one-to-one
relation between effect size categories and benefit categories, i.e. a
large treatment effect corresponds to a large benefit and so on. If you
want to implement this scenario you can do this by defining the
parameters <code>steps1</code>, <code>stepm1</code> and
<code>stepl1</code>. Here, we set them to <code>steps1 = 0.1</code>,
<code>stepm1 = 0.6</code> and <code>stepl1 = 1</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_normal.html">optimal_normal</a></span><span class="op">(</span>Delta1 <span class="op">=</span> <span class="fl">0.625</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># treatment effect</span></span>
<span>                       n2min <span class="op">=</span> <span class="fl">20</span>, n2max <span class="op">=</span> <span class="fl">400</span>, <span class="co"># sample size region</span></span>
<span>                       stepn2 <span class="op">=</span> <span class="fl">4</span>, <span class="co"># sample size step size</span></span>
<span>                       kappamin <span class="op">=</span> <span class="fl">0.02</span>, kappamax <span class="op">=</span> <span class="fl">0.2</span>, <span class="co"># threshold region</span></span>
<span>                       stepkappa <span class="op">=</span> <span class="fl">0.02</span>, <span class="co"># threshold step size</span></span>
<span>                       c2 <span class="op">=</span> <span class="fl">0.675</span>, c3 <span class="op">=</span> <span class="fl">0.72</span>, <span class="co"># maximal total trial costs</span></span>
<span>                       c02 <span class="op">=</span> <span class="fl">15</span>, c03 <span class="op">=</span> <span class="fl">20</span>, <span class="co"># maximal per-patient costs</span></span>
<span>                       b1 <span class="op">=</span> <span class="fl">3000</span>, b2 <span class="op">=</span> <span class="fl">8000</span>, b3 <span class="op">=</span> <span class="fl">10000</span>, <span class="co"># gains for patients</span></span>
<span>                       alpha <span class="op">=</span> <span class="fl">0.05</span>, <span class="co"># significance level</span></span>
<span>                       beta <span class="op">=</span> <span class="fl">0.1</span>, <span class="co"># 1 - power</span></span>
<span>                       Delta2 <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, in1 <span class="op">=</span> <span class="cn">NULL</span>, in2 <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       a <span class="op">=</span> <span class="cn">NULL</span>,b <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># setting all unneeded parameters to NULL</span></span>
<span>                       steps1 <span class="op">=</span> <span class="fl">0.1</span>, stepm1 <span class="op">=</span> <span class="fl">0.6</span>, stepl1 <span class="op">=</span> <span class="fl">1</span> <span class="co">#stepsizes for effect size categories</span></span>
<span>                       <span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="differences-in-the-treatments-effect">Differences in the Treatments Effect<a class="anchor" aria-label="anchor" href="#differences-in-the-treatments-effect"></a>
</h3>
<p>Due to different population structures in phase II and phase III the
assumed true treatment effect <code>Delta1</code> may not be the same in
both phases. Phase III trials are often conducted in populations that
are more heterogeneous than that of the preceding phase II trials (Kirby
et al., 2012), so the effect in phase III may be different than in phase
II. In order to model for these differences, one can use the parameter
<code>gamma</code>. The treatment effect in phase III is than calculated
as follows: <span class="math inline">\(\Delta_3 = \Delta_2 +
\gamma\)</span>. Values of gamma below zero indicate a more pessimistic
view, values above zero indicate a more optimistic view about the
treatment effect in the confirmatory phase. The default value of
<code>gamma</code> is zero.</p>
</div>
<div class="section level3">
<h3 id="skipping-phase-ii">Skipping Phase II<a class="anchor" aria-label="anchor" href="#skipping-phase-ii"></a>
</h3>
<p>Adding the option to skip phase II can be integrated in the framework
by using the parameter <code>skipII</code> The value of the treatment
effect used for phase III planning may be calculated by the median of
the prior distribution used for modeling the true assumed treatment
effect in phase II. If we set the parameter <code>TRUE</code>, the
program calculates the expected utility for the case when phase II is
skipped and compares it to the situation when phase II is not
skipped.The results are then returned as a list of two results lists,
<code>res[[1]]</code> being the results when including phase II and
<code>res[[2]]</code> when skipping phase II. The default value is
<code>skipII = FALSE</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">resII</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_normal.html">optimal_normal</a></span><span class="op">(</span>Delta1 <span class="op">=</span> <span class="fl">0.625</span>, fixed <span class="op">=</span> <span class="cn">TRUE</span>, <span class="co"># treatment effect</span></span>
<span>                       n2min <span class="op">=</span> <span class="fl">20</span>, n2max <span class="op">=</span> <span class="fl">400</span>, <span class="co"># sample size region</span></span>
<span>                       stepn2 <span class="op">=</span> <span class="fl">4</span>, <span class="co"># sample size step size</span></span>
<span>                       kappamin <span class="op">=</span> <span class="fl">0.02</span>, kappamax <span class="op">=</span> <span class="fl">0.2</span>, <span class="co"># threshold region</span></span>
<span>                       stepkappa <span class="op">=</span> <span class="fl">0.02</span>, <span class="co"># threshold step size</span></span>
<span>                       c2 <span class="op">=</span> <span class="fl">0.675</span>, c3 <span class="op">=</span> <span class="fl">0.72</span>, <span class="co"># maximal total trial costs</span></span>
<span>                       c02 <span class="op">=</span> <span class="fl">15</span>, c03 <span class="op">=</span> <span class="fl">20</span>, <span class="co"># maximal per-patient costs</span></span>
<span>                       b1 <span class="op">=</span> <span class="fl">3000</span>, b2 <span class="op">=</span> <span class="fl">8000</span>, b3 <span class="op">=</span> <span class="fl">10000</span>, <span class="co"># gains for patients</span></span>
<span>                       alpha <span class="op">=</span> <span class="fl">0.05</span>, <span class="co"># significance level</span></span>
<span>                       beta <span class="op">=</span> <span class="fl">0.1</span>, <span class="co"># 1 - power</span></span>
<span>                       Delta2 <span class="op">=</span> <span class="cn">NULL</span>, w <span class="op">=</span> <span class="cn">NULL</span>, in1 <span class="op">=</span> <span class="cn">NULL</span>, in2 <span class="op">=</span> <span class="cn">NULL</span>, </span>
<span>                       a <span class="op">=</span> <span class="cn">NULL</span>,b <span class="op">=</span> <span class="cn">NULL</span>, <span class="co"># setting all unneeded parameters to NULL</span></span>
<span>                       skipII <span class="op">=</span> <span class="cn">TRUE</span> <span class="co">#skipping phase II</span></span>
<span>                       <span class="op">)</span> </span></code></pre></div>
<p>We get the following results:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">resII</span></span>
<span><span class="co">#&gt; [[1]]</span></span>
<span><span class="co">#&gt;         u Kappa n2  n3   n pgo sProg Delta   K K2  K3 sProg1 sProg2 sProg3</span></span>
<span><span class="co">#&gt; 1 3259.83  0.06 84 166 250   1  0.85 0.625 Inf 72 139   0.68   0.17   0.01</span></span>
<span><span class="co">#&gt;   steps1 stepm1 stepl1 alpha beta c02 c03    c2   c3   b1   b2    b3 gamma</span></span>
<span><span class="co">#&gt; 1      0    0.5    0.8  0.05  0.1  15  20 0.675 0.72 3000 8000 10000     0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [[2]]</span></span>
<span><span class="co">#&gt;         u Delta Kappa n2 n3 pgo sProg   K K2 K3 sProg1 sProg2 sProg3 steps1</span></span>
<span><span class="co">#&gt; 1 3353.72  0.62  -Inf  0 88   1   0.9 Inf  0 83   0.76   0.14   0.01      0</span></span>
<span><span class="co">#&gt;   stepm1 stepl1 alpha beta c02 c03 c2   c3   b1   b2    b3 gamma</span></span>
<span><span class="co">#&gt; 1    0.5    0.8  0.05  0.1   0  20  0 0.72 3000 8000 10000     0</span></span></code></pre></div>
<p>It can be seen that in this case skipping phase II yields a higher
utility than including phase II. As skipping phase II automatically sets
<code>n2 = O</code>, leading to costs <code>K2 = 0</code> , hence,
overall costs may be smaller. Furthermore, note that the optimal
threshold value <code>Kappa</code> is also automatically set to
<code>-Inf</code> and the probability to go to phase III
<code>pgo = 1</code>, as we go to phase III every time, when skipping
phase II.</p>
</div>
<div class="section level3">
<h3 id="parallel-computing">Parallel Computing<a class="anchor" aria-label="anchor" href="#parallel-computing"></a>
</h3>
<p>As some of the programs may have very long run-times, especial more
complex ones, fast computing is enabled by parallel programming. The
parameter <code>num_cl</code> allows you to set the number of cores for
parallel computing. It is advisable to check the number of cores
available by using the function <code><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores()</a></code>. The default
value is <code>num_cl = 1</code>. Note, that using this parameters does
not change the results, but can decrease run-time significantly.</p>
</div>
</div>
<div class="section level2">
<h2 id="where-to-go-from-here">Where to go from here<a class="anchor" aria-label="anchor" href="#where-to-go-from-here"></a>
</h2>
<p>This tutorial presents more parameters, so you can adapt the the
program to your specific needs. For more information on how to use the
package, see:</p>
<ul>
<li>
<a href="https://sterniii3.github.io/drugdevelopR/articles/introduction-to-drugdevelopR.html"><em>Introduction
to drugdevelopR:</em></a> See how the package works in a basic
example.</li>
<li>
<em>Different outcomes:</em> Apply it to <a href="https://sterniii3.github.io/drugdevelopR/articles/Binary_distributed_outcomes.html">binary
endpoints</a> and <a href="https://sterniii3.github.io/drugdevelopR/articles/Time-to-event_outcomes.html">time-to-event
endpoints</a>.</li>
<li>
<a href="https://sterniii3.github.io/drugdevelopR/articles/Interpreting_Output.html"><em>Interpreting
the rest of the output:</em></a> Obtain further details on your drug
development program.</li>
<li>
<a href="https://sterniii3.github.io/drugdevelopR/articles/Fixed_and_prior_distributions.html"><em>Fixed
or prior:</em></a> Model the assumed treatment effect on a prior
distribution.</li>
<li>
<em>Complex drug development programs:</em> Adapt to situations with
<a href="https://sterniii3.github.io/drugdevelopR/articles/Bias_adjustment.html">biased
effect estimators</a>, <a href="https://sterniii3.github.io/drugdevelopR/articles/Multitrial.html">multiple
phase III trials</a>, <a href="https://sterniii3.github.io/drugdevelopR/articles/Multiarm_Trials.html">multi-arm
trials</a>, or multiple endpoints.</li>
</ul>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Cohen, J. (1988). Statistical power analysis for the behavioral
sciences.</p>
<p>Kirby, S., Burke, J., Chuang-Stein, C., and Sin, C. (2012).
Discounting phase 2 results when planning phase 3 clinical trials.
Pharmaceutical Statistics, 11(5):373–385.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Stella Preussler.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
