<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="drugdevelopR">
<title>Multiarm - methods for multi-arm programs • drugdevelopR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Multiarm - methods for multi-arm programs">
<meta property="og:description" content="drugdevelopR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">drugdevelopR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introduction-to-drugdevelopR.html">Introduction to planning phase II and phase III trials with drugdevelopR</a>
    <a class="dropdown-item" href="../articles/Package_validation.html">Package validation</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Sterniii3/drugdevelopR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Multiarm - methods for multi-arm programs</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Sterniii3/drugdevelopR/blob/HEAD/vignettes/Multiarm_Trials.Rmd" class="external-link"><code>vignettes/Multiarm_Trials.Rmd</code></a></small>
      <div class="d-none name"><code>Multiarm_Trials.Rmd</code></div>
    </div>

    
    
<p>Suppose we are planning a drug development program testing the
superiority of an experimental treatment over a control treatment. Our
drug development program consists of an exploratory phase II trial which
is, in case of promising results, followed by a confirmatory phase III
trial.</p>
<p>The drugdevelopR package enables us to optimally plan such programs
using a utility-maximizing approach. To get a brief introduction, we
presented a very basic example on how the package works in <a href="https://sterniii3.github.io/drugdevelopR/articles/Introduction-to-drugdevelopR.html">Introduction
to planning phase II and phase III trials with drugdevelopR</a>. In the
basic setting, only one phase II and one phase III trial were conducted.
Contrary to this, we now investigate what happens when multi-arm trials
are conducted, where several different treatments or several doses of
the same treatment are tested at the same time. The drugdevelopR package
enables multi-arm program with two treatment arms and one control
arm.</p>
<div class="section level2">
<h2 id="the-example-setting">The example setting<a class="anchor" aria-label="anchor" href="#the-example-setting"></a>
</h2>
<p>Suppose we are developing a new tumor treatment, <em>exper</em>. The
patient variable that we want to investigate is how long the patient
survives without further progression of the tumor (progression-free
survival). This is a time-to-event outcome variable. We want to test two
different doses of, <em>exper1</em> and <em>exper2</em>. Therefore, we
will use the function <code>optimal_multiarm</code>, which calculates
optimal sample sizes and threshold decisions values for time-to-event
outcomes when multi-arm trials are conducted.</p>
<p>Within our drug development program, we will compare our two
experimental treatments <em>exper1</em> and <em>exper2</em> to the
control treatment <em>contro</em>. The treatment effect measure is given
by <span class="math inline">\(\theta = −\log(HR)\)</span>, where the
hazard ratio <span class="math inline">\(HR\)</span> is the ratio of
hazards of each treatment and the control.</p>
</div>
<div class="section level2">
<h2 id="applying-the-package-to-the-example">Applying the package to the example<a class="anchor" aria-label="anchor" href="#applying-the-package-to-the-example"></a>
</h2>
<p>After installing the package according to the <a href="https://sterniii3.github.io/drugdevelopR/#Installation">installation
instructions</a>, we can load it using the following code:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Sterniii3/drugdevelopR" class="external-link">drugdevelopR</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required package: doParallel</span></span>
<span><span class="co">#&gt; Loading required package: foreach</span></span>
<span><span class="co">#&gt; Loading required package: iterators</span></span>
<span><span class="co">#&gt; Loading required package: parallel</span></span></code></pre></div>
<div class="section level3">
<h3 id="defining-all-necessary-parameters">Defining all necessary parameters<a class="anchor" aria-label="anchor" href="#defining-all-necessary-parameters"></a>
</h3>
<p>As, the parameters in the multi-arm setting differ slightly from the
other cases (<a href="https://sterniii3.github.io/drugdevelopR/articles/Bias_adjustment.html">bias
adjustment</a> and <a href="https://sterniii3.github.io/drugdevelopR/articles/Multitrial.html">multitrial</a>),
we will explain them in more detail. Contrary to the basic setting, the
treatment effect are always assumed to be fixed, so the option to use
prior distributions is not available. Nevertheless, some options to
adapt the program to your specific needs are also available in this
setting (see <a href="https://sterniii3.github.io/drugdevelopR/articles/More_Parameters.html">More
parameters</a>), however, skipping phase II and choosing different
treatment effects in phase II and III are not possible.</p>
<p>The following parameters are different to the basic setting, even if
the names are the same.</p>
<ul>
<li>
<code>hr1</code> is our hazard ratio for the first dose
<em>exper1</em>. As already explained above, we assume that our
experimental treatment <em>exper1</em> leads to unfavorable events
occurring only 75% of times compared to the control treatment
<em>contro</em>. Therefore, we set <code>hr1 = 0.75</code>. Analogously,
<code>hr2</code> is the hazard ratio for our second dose
<em>exper2</em>. For our example, we set <code>hr2 = 0.8</code>.</li>
<li>
<code>ec</code> is the control arm event rate for phase II and III,
how often the unfavorable event occurs in the control group. We assume
that 60% of patients in the group <em>contro</em> have an unfavorable
event, thus, we set <code>ec = 0.6</code>.</li>
<li>
<code>n2min</code> and <code>n2max</code> specify the minimal and
maximal number of participants for the phase II trial. The package will
search for the optimal sample size within this region. For now, we want
the program to search for the optimal sample size in the interval
between 20 and 400 participants. In addition, we will tell the program
to search this region in steps of ten participants at a time by setting
<code>stepn2 = 10</code>. This is different to <code>optimal_tte</code>,
where the region of events (and not the sample size region) is
searched.</li>
</ul>
<p>One parameter that is not in the basic setting is the following
parameter:</p>
<ul>
<li>The parameter <code>strategy</code> allows the user to choose
between three strategies. One can select <code>strategy = 1</code> in
which only the best promising candidate of the two doses proceeds to
phase III, <code>strategy = 2</code> in which all promising candidates
proceed to phase III or <code>strategy = 3</code>, in which both
strategies are explored. For our example we want to explore both
settings, so we use <code>strategy = 3</code>.</li>
</ul>
<p>The other parameters are identical to the basic setting. Let’s plug
them into the function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/optimal_multiarm.html">optimal_multiarm</a></span><span class="op">(</span>hr1 <span class="op">=</span> <span class="fl">0.75</span>, hr2 <span class="op">=</span> <span class="fl">0.80</span>, ec <span class="op">=</span> <span class="fl">0.6</span>, <span class="co"># define assumed true HRs and control arm event rate</span></span>
<span>   n2min <span class="op">=</span> <span class="fl">100</span>, n2max <span class="op">=</span> <span class="fl">200</span>, stepn2 <span class="op">=</span> <span class="fl">10</span>,                 <span class="co"># define optimization set for n2</span></span>
<span>   hrgomin <span class="op">=</span> <span class="fl">0.76</span>, hrgomax <span class="op">=</span> <span class="fl">0.9</span>, stephrgo <span class="op">=</span> <span class="fl">0.02</span>,        <span class="co"># define optimization set for HRgo</span></span>
<span>   alpha <span class="op">=</span> <span class="fl">0.025</span>, beta <span class="op">=</span> <span class="fl">0.1</span>,                             <span class="co"># drug development planning parameters</span></span>
<span>   c2 <span class="op">=</span> <span class="fl">0.75</span>, c3 <span class="op">=</span> <span class="fl">1</span>, c02 <span class="op">=</span> <span class="fl">100</span>, c03 <span class="op">=</span> <span class="fl">150</span>,               <span class="co"># define fixed and variable costs for phase II and III</span></span>
<span>   b1 <span class="op">=</span> <span class="fl">1000</span>, b2 <span class="op">=</span> <span class="fl">2000</span>, b3 <span class="op">=</span> <span class="fl">3000</span>,                       <span class="co"># gains for each effect size category</span></span>
<span>   strategy <span class="op">=</span> <span class="fl">3</span>,                                          </span>
<span>   num_cl <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="interpreting-the-output">Interpreting the output<a class="anchor" aria-label="anchor" href="#interpreting-the-output"></a>
</h3>
<p>After setting all these input parameters and running the function,
let’s take a look at the output of the program.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">res</span></span>
<span><span class="co">#&gt; Optimization result where only the most promising candidate continues:</span></span>
<span><span class="co">#&gt;  Utility: 66.88</span></span>
<span><span class="co">#&gt;  Sample size:</span></span>
<span><span class="co">#&gt;    phase II: 140, phase III: 393, total: 533</span></span>
<span><span class="co">#&gt;  Probability to go to phase III: 0.75</span></span>
<span><span class="co">#&gt;  Total cost:</span></span>
<span><span class="co">#&gt;    phase II: 205, phase III: 505, cost constraint: Inf</span></span>
<span><span class="co">#&gt;  Fixed cost:</span></span>
<span><span class="co">#&gt;    phase II: 100, phase III: 150</span></span>
<span><span class="co">#&gt;  Variable cost per patient:</span></span>
<span><span class="co">#&gt;    phase II: 0.75, phase III: 1</span></span>
<span><span class="co">#&gt;  Effect size categories (expected gains):</span></span>
<span><span class="co">#&gt;   small: 1 (1000), medium: 0.95 (2000), large: 0.85 (3000)</span></span>
<span><span class="co">#&gt;  Success probability: 0.38</span></span>
<span><span class="co">#&gt;  Success probability for a trial with:</span></span>
<span><span class="co">#&gt;    two arms in phase III: 0.38, three arms in phase III: 0</span></span>
<span><span class="co">#&gt;  Significance level: 0.025</span></span>
<span><span class="co">#&gt;  Targeted power: 0.9</span></span>
<span><span class="co">#&gt;  Decision rule threshold: 0.82 [HRgo] </span></span>
<span><span class="co">#&gt;  Assumed true effects [HR]: </span></span>
<span><span class="co">#&gt;    treatment 1: 0.75,  treatment 2: 0.8</span></span>
<span><span class="co">#&gt;  Control arm event rate: 0.6</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Optimization result where all promising candidates continue:</span></span>
<span><span class="co">#&gt;  Utility: 56.6</span></span>
<span><span class="co">#&gt;  Sample size:</span></span>
<span><span class="co">#&gt;    phase II: 100, phase III: 481, total: 581</span></span>
<span><span class="co">#&gt;  Probability to go to phase III: 0.68</span></span>
<span><span class="co">#&gt;  Total cost:</span></span>
<span><span class="co">#&gt;    phase II: 175, phase III: 583, cost constraint: Inf</span></span>
<span><span class="co">#&gt;  Fixed cost:</span></span>
<span><span class="co">#&gt;    phase II: 100, phase III: 150</span></span>
<span><span class="co">#&gt;  Variable cost per patient:</span></span>
<span><span class="co">#&gt;    phase II: 0.75, phase III: 1</span></span>
<span><span class="co">#&gt;  Effect size categories (expected gains):</span></span>
<span><span class="co">#&gt;   small: 1 (1000), medium: 0.95 (2000), large: 0.85 (3000)</span></span>
<span><span class="co">#&gt;  Success probability: 0.4</span></span>
<span><span class="co">#&gt;  Success probability for a trial with:</span></span>
<span><span class="co">#&gt;    two arms in phase III: 0.18, three arms in phase III: 0.22</span></span>
<span><span class="co">#&gt;  Significance level: 0.025</span></span>
<span><span class="co">#&gt;  Targeted power: 0.9</span></span>
<span><span class="co">#&gt;  Decision rule threshold: 0.78 [HRgo] </span></span>
<span><span class="co">#&gt;  Assumed true effects [HR]: </span></span>
<span><span class="co">#&gt;    treatment 1: 0.75,  treatment 2: 0.8</span></span>
<span><span class="co">#&gt;  Control arm event rate: 0.6</span></span></code></pre></div>
<p>The program returns a data frame, where the output for all
implemented strategies is listed. For strategy 1 (only the best
promising proceeds to phase III) we get:</p>
<ul>
<li>
<code>res[1,]$n2</code> is the optimal number of participants for
phase II and <code>res$n3</code> the resulting number of events for
phase III. We see that the optimal scenario requires 140 participants in
phase II and 393 participants in phase III.</li>
<li>
<code>res[1,]$HRgo</code> is the optimal threshold value for the
go/no-go decision rule. We see that we need a hazard ratio of less than
0.82 in phase II in order to proceed to phase III.</li>
<li>
<code>res[1,]$u</code> is the expected utility of the program for
the optimal sample size and threshold value. In our case it amounts to
66.88, i.e. we have an expected utility of 6 688 000$.</li>
</ul>
<p>The results for strategy 2 (all promising proceed to phase III)
are:</p>
<ul>
<li>
<code>res[2,]$n2</code> is the optimal number of participants for
phase II and <code>res$n3</code> the resulting number of events for
phase III. We see that the optimal scenario requires 100 participants in
phase II and 481 participants in phase III.</li>
<li>
<code>res[2,]$HRgo</code> is the optimal threshold value for the
go/no-go decision rule. We see that we need a hazard ratio of less than
0.78 in phase II in order to proceed to phase III.</li>
<li>
<code>res[2,]$u</code> is the expected utility of the program for
the optimal sample size and threshold value. In our case it amounts to
56.6, i.e. we have an expected utility of 5 660 000$.</li>
</ul>
<p>Furthermore, consider the return values <code>sProg</code>,
<code>sProg2</code> and <code>sProg3</code>. Contrary to the basic
setting, <code>sProg2</code> is the probability of a successful program
with only one treatment in phase III (i.e. two arms) and
<code>sProg3</code> is the probability of a successful program with two
treatments in phase III (i.e. three arms). Hence, for strategy 1 (only
the most promising treatment in phase II proceeds to phase III)
<code>sProg = sProg2 = 0.38</code>. With strategy 2 (all promising
treatments proceed to phase III), the success probability
<code>sProg</code> is the sum of the probability that both treatments go
to phase III <code>sProg3 = 0.22</code> and the probability that only
one treatment proceeds to phase III <code>sProg2 = 0.18</code>.</p>
</div>
</div>
<div class="section level2">
<h2 id="where-to-go-from-here">Where to go from here<a class="anchor" aria-label="anchor" href="#where-to-go-from-here"></a>
</h2>
<p>In this article, we presented an example where multi-arm trials are
conducted. Note that this example is not restricted to time-to-event
endpoints but can also be applied to binary and normally distributed
endpoints by using the functions <code>optimal_multiarm_binary</code>
and <code>optimal_multiarm_normal</code>.</p>
<p>For more information on how to use the package, see:</p>
<ul>
<li>
<a href="https://sterniii3.github.io/drugdevelopR/articles/Introduction-to-drugdevelopR.html"><em>Introduction
to drugdevelopR:</em></a> See how the package works in a basic
example.</li>
<li>
<em>Different outcomes:</em> Apply it to <a href="https://sterniii3.github.io/drugdevelopR/articles/Binary_outcomes.html">binary
endpoints</a> and <a href="https://sterniii3.github.io/drugdevelopR/articles/Time-to-event_outcomes.html">time-to-event
endpoints</a>.</li>
<li>
<a href="https://sterniii3.github.io/drugdevelopR/articles/Interpreting_Output.html"><em>Interpreting
the rest of the output:</em></a> Obtain further details on your drug
development program.</li>
<li>
<a href="https://sterniii3.github.io/drugdevelopR/articles/Fixed_and_prior_distributions.html"><em>Fixed
or prior:</em></a> Model the assumed treatment effect on a prior
distribution.</li>
<li>
<a href="https://sterniii3.github.io/drugdevelopR/articles/More_Parameters.html"><em>More
parameters:</em></a> Define custom effect size categories. Put
constraints on the optimization by defining maximum costs, the total
expected sample size of the program or the minimum expected probability
of a successful program. Define an expected difference in treatment
effect between phase II and III. Skip phase II.</li>
<li>
<em>Complex drug development programs:</em> Adapt to situations with
<a href="https://sterniii3.github.io/drugdevelopR/articles/Bias_adjustment.html">biased
effect estimators</a>, <a href="https://sterniii3.github.io/drugdevelopR/articles/Multitrial.html">multiple
phase III trials</a>, or <a href="https://sterniii3.github.io/drugdevelopR/articles/Multiple_Endpoints.html">multiple
endpoints</a>.</li>
<li>
<a href="https://sterniii3.github.io/drugdevelopR/articles/More_Parameters.html#parallel-computing"><em>Parallel
computing:</em></a> Be faster at calculating the optimum by using
parallel computing.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Stella Erdmann, Johannes Cepicka, Marietta Kirchner, Meinhard Kieser, Lukas D. Sauer.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
